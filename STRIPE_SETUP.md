# Stripe APIキーの設定手順

## 1. Stripeアカウントの作成・ログイン

1. [Stripe](https://stripe.com/jp)にアクセス
2. アカウントを作成するか、既存のアカウントでログイン

## 2. APIキーの取得

1. [Stripeダッシュボード](https://dashboard.stripe.com/)にログイン
2. 左上の「開発者」をクリック
3. 「APIキー」をクリック
4. **「テストモード」が有効になっていることを確認**（右上のトグルスイッチ）

## 3. 公開可能キー（Publishable key）をコピー

- 公開可能キーは「pk_test_」で始まります

## 4. シークレットキー（Secret key）をコピー

- 「シークレットキーを表示」をクリック
- シークレットキーは「sk_test_」で始まります

**重要**: シークレットキーは一度しか表示されない場合があります。必ずコピーして保存してください。

## 5. .envファイルに設定

`src/.env`ファイルを開き、以下のように設定してください：

```env
STRIPE_KEY=<your_publishable_key>
STRIPE_SECRET=<your_secret_key>
```

**注意事項:**
- `=`の前後にスペースを入れないでください
- キーの前後に引用符（`"`や`'`）を付けないでください
- キー全体を1行で記述してください（改行しない）

## 6. 設定の確認

設定後、以下のコマンドで設定を確認できます：

```bash
docker-compose exec php php artisan config:clear
docker-compose exec php php artisan cache:clear
```

## 7. テストカード番号

APIキーを設定後、以下のテストカードで動作確認できます：

- **カード番号**: `4242 4242 4242 4242`
- **有効期限**: 任意の未来の日付（例: `12/34`）
- **CVC**: 任意の3桁（例: `123`）
- **郵便番号**: 任意の5桁（例: `12345`）

## トラブルシューティング

### APIキーが無効と表示される場合

1. キーが正しくコピーされているか確認（前後の空白がないか）
2. テストモードのキーを使用しているか確認（`pk_test_`と`sk_test_`で始まる）
3. `.env`ファイルを保存したか確認
4. 設定キャッシュをクリアしたか確認

### キーが見つからない場合

1. Stripeダッシュボードで「テストモード」が有効になっているか確認
2. 「開発者」→「APIキー」のページにいるか確認
3. シークレットキーは「シークレットキーを表示」ボタンをクリックする必要があります
